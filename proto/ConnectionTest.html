<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WiFi Test v1 - 1.16.26</title>
</head>
<body>
    <h1>Firebase Connection Test</h1>
    <div id="status-display">Loading connection status...</div>

    <script type="module">
        // 1. IMPORT (Using full URLs)
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js";
        import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js";

        // 2. CONFIG (Paste your specific config here)
        const firebaseConfig = {
            apiKey: "AIzaSyC-Rm6at6ir7lRGx2ZpJvHYDtB_Y6JWME0",
            authDomain: "measurely-ctd-capstone.firebaseapp.com",
            databaseURL: "https://measurely-ctd-capstone-default-rtdb.firebaseio.com",
            projectId: "measurely-ctd-capstone",
            storageBucket: "measurely-ctd-capstone.firebasestorage.app",
            messagingSenderId: "130241754874",
            appId: "1:130241754874:web:e201593781a7212e75fb43",
            measurementId: "G-LJ2HBQ144K"
        };


        // 3. INITIALIZE
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // 4. READ FUNCTION
        async function checkConnection() {
            const display = document.getElementById('status-display');
            
            try {
                // Look for the document we created in the previous step
                const docRef = doc(db, "testCollection", "testDoc");
                const docSnap = await getDoc(docRef);

                if (docSnap.exists()) {
                    const data = docSnap.data();
                    display.innerText = "Success! Firebase says: " + data.status;
                    display.style.color = "green";
                } else {
                    display.innerText = "Connected, but no document found. Did you run the 'Write' test first?";
                }
            } catch (error) {
                console.error("Connection failed:", error);
                display.innerText = "Error: Check console for details.";
                display.style.color = "red";
            }
        }

        checkConnection();
    </script>
</body>
</html>